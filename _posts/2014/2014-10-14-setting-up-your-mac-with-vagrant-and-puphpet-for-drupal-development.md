---
layout: post
title: Setting up your Mac with Vagrant and Puphpet for Drupal Development
created: 1413297984
---


I&#39;m always a bit behind with development trends, mainly because working for yourself or small businesses, you rarely have the luxury of spare time to experiment and tend to<span class="Apple-converted-space">&nbsp; stick with what you have to get the job done.

For a couple of reasons I wanted to finally try some sort of new development setup and thought it was high time to look into a <a href="https://www.vagrantup.com/" target="_blank">Vagrant</a> style setup. These reasons were:<ul class="ul1"><li class="li3">I have a little more spare time</li><li class="li3">I am about to embark on a bunch of new development projects</li><li class="li3">I don&#39;t like having redundant extensions littered around my computer</li><li class="li3">I anticipated the updating my Mac would probably break my fairly highly tuned development setup, so it seemed a good time to prevent this happening again</li><li class="li3">I like to learn :)</li></ul>I have only really just got settled into using Homebrew and love it, so I was slightly sad to be using it less, but it will still get used for other tasks. I am (currently) predominately a Drupal developer, so this will be slightly skewed to that sort of setup, but you may still glean some other more general tips from the steps that worked for me. I like to use GUIs and neatly packaged options as much as possible, so I will often take myself down those paths.<h2>Installing Vagrant</h2>

I ended up following the instructions found on <a href="https://www.sourabhbajaj.com/mac-setup/Vagrant/README.html" target="_blank">Sourabh Bajajs Mac OS X setup guide</a> as it utilised Homebrew (sort of) and added a Vagrant GUI, which all made me very happy.

&nbsp;<h2>Installing and setting up Puppet</h2><p class="p1">Installing Vagrant was a pretty easy step, but after this I was a little stumped as to next best steps and was still only partially understanding what it was I was really aiming for. I knew that Puppet was the next step but didn&#39;t really know where to start. I had seen <a href="https://github.com/alehkot/druphpet" target="_blank">Druphpet</a> mentioned at <a href="https://www.sitepoint.com/drupalcon-amsterdam-2014-report/" target="_blank">DrupalCon Amsterdam</a> and thought this would be a good place to start, especially as I had a lot of trouble getting <a href="https://puphpet.com/" target="_blank">Puphpet</a> (which Druphpet is based upon) to work, mainly due to an Ubuntu problem it seems. After installing Composer (with Homebrew of course!) Druphpet worked fine, but I found that (personally) it installed a lot of things I didn&#39;t really need.<p class="p1">After a lot of trial and error, I ended up taking Druphpets <code>config.yaml</code> file, customising it to my needs and then pasting it back into Puphpet to get the zip file that I needed and that worked perfectly.<p class="p1"><a href="https://gist.github.com/ChrisChinchilla/5b8cf016e3cfdb5616d1" target="_blank">You can find my config.yaml file here</a>.<p class="p1">One of the other issues I found, and I&#39;m not entirely sure what is &#39;best practise&#39; here, was where to download my Puphpet zip file to. This is important, because when you create your Vagrant box based upon it, it needs to know where to find it and if it moves, the creation process will fail. So I recommend you move the folder to its permanent home before setting up your Vagrant box. For me, I have placed them alongside my Virtual Machines.<p class="p1">As I installed Vagrant Manager, all I really need to now do each time I want to start developing is fire up my Vagrant box from the handy menu item.<p class="p4"><img alt="Image" height="239" src="https://dl.dropboxusercontent.com/u/431865/Screenshot%202014-10-14%2016.04.55.png" width="320" /><h2>Database and Host connections</h2><p class="p1">Most configuration happens within the <code>config.yaml</code> file, which I really love and it appeals to my sense of &#39;containerising&#39; where I undertake my work. However, you will still need to setup your hosts file (<code>/etc/hosts</code>) so your Mac knows where to find site urls you enter into your browser, in my case it looks like this (The IP seems to be standard with Vagrant, but it may be different for you):<img alt="Image" height="197" src="https://dl.dropboxusercontent.com/u/431865/Screenshot%202014-10-14%2016.07.07.png" width="447" /><p class="p1">Following my love of GUIs, I use <a href="https://www.sequelpro.com/" target="_blank">SequelPro</a> for database management and as you are effectively connecting to another server, you can no longer use a standard &#39;Localhost&#39; connection to connect to your database. I found <a href="https://coderwall.com/p/yzwqvg" target="_blank">this Coderwall post</a> a good start for me, but make sure you use your own details of course. Now my SequelPro connection settings look like this:<p class="p4"><img alt="Image" height="524" src="https://dl.dropboxusercontent.com/u/431865/Screenshot%202014-10-14%2016.14.07.png" width="469" />All that remains is to import your databases and existing code. Code is really easy thanks to the Vagrant shared folder and all you will probably need to do is move it from the old location to the new.<h2>Cleaning Up</h2><p class="p1">I hate having duplicate versions of things lying around on my computer, so next step for me (once I was sure I had copies of everything) was removing all my old copies of MySQL, PHP etc. If you have been using Homebrew, you can probably just brew remove everything, any other extensions you may have installed I will have to leave up to you. If you&#39;re especially pedantic like me (and have been moving your Mac setup from one machine to another for over a decade), digging around hidden folders you&#39;re likely to find remnants of config files, binaries and other miscellany, I took a chance and deleted anything I found, but I&#39;ll leave that up you!<p class="p1">I would love to be able to remove Mac OS Xs built in PHP and Apache, but I haven&#39;t figured out if that&#39;s possible yet.<h2>Next Steps</h2><p class="p1">I use <a href="https://www.digitalocean.com" target="_blank">Digital Ocean</a> for hosting, which you can <a href="https://www.digitalocean.com/community/tutorials/how-to-use-digitalocean-as-your-provider-in-vagrant-on-an-ubuntu-12-10-vps" target="_blank">theoretically push your Vagrant boxes</a> straight to for production (I think) and it&#39;s these next steps I want to investigate more, i.e., Deployments etc. I gather this is the domain of tools such as <a href="https://www.docker.com/" target="_blank">Docker</a> and <a href="https://www.ansible.com/home" target="_blank">Ansible</a>, but I&#39;m still figuring that out.<h2>Bonus! Get rid of 20gb of Windows installs</h2><p class="p1">As part of my explorations I came across <a href="https://github.com/xdissent/ievms" target="_blank">this awesome tool for testing with Internet Explorer</a> on non-Windows machines. It&#39;s not based on Vagrant, but is VM based, so thought I would throw it in to the mix and it enabled me to delete my 20gb Windows 8 Virtualbox that I used just for Internet Explorer. That made me very happy, however you will still end up with about 5gb of disk space consumed.
