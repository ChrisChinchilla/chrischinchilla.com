---
import { YouTube } from "@astro-community/astro-embed-youtube";

const { video } = Astro.props;
var url = `https://youtu.be/${video.snippet.resourceId.videoId}`;

// Extract first two paragraphs from description
const paragraphs = video.snippet.description
  .split('\n\n')
  .filter(p => p.trim().length > 0);
const truncatedDescription = paragraphs.slice(0, 2).join('\n\n');
---

<article class="mb-6 transition px-4">

  <div class="relative md:h-72 max-w-6xl mx-auto  rounded drop-shadow-lg mb-6">
    <YouTube id={video.snippet.resourceId.videoId} />
</div>
  
    <div class="mt-2">
      <header>
      <h2 class="text-xl sm:text-2xl leading-tight mb-2 font-subheading font-semibold">
        {
          url ? (
            <a class="hover:text-primary transition ease-in duration-200" href={url}>
              {video.snippet.title}
            </a>
          ) : (
          video.snippet.title
          )
        }
      </h2>
      </header>
      <p class="whitespace-pre-line">
        {truncatedDescription}
      </p>
    </div>

</article>
