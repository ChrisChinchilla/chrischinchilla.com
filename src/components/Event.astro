---
// TODO: refactor to content collection
export interface Props {
  title: string;
  event: string;
  body: string;
  pres_url: string;
  pres_source: string;
  start_date: Date;
  venue: string;
}

const { title, event, body, pres_url, pres_source, start_date, venue } = Astro.props;

var formatted_date = start_date.toLocaleDateString('en-GB', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

var currentDate = new Date();
var eventDate = new Date(start_date);
var eventFormat = '';
{
  currentDate < eventDate ? (eventFormat = 'opacity-100') : (eventFormat = 'opacity-45');
}
---

<article class=`mb-8 md:mb-12 ${eventFormat}`>
  <header class="mb-4">
    <h2 class="text-xl sm:text-2xl leading-tight mb-2 font-subheading font-semibold">
      {event}
    </h2>
    <div class="text-sm md:text-base text-gray-600 dark:text-gray-400 space-y-1">
      <p class="font-medium">{formatted_date}</p>
      <p>{venue}</p>
    </div>
  </header>

  <div class="space-y-4">
    {
      pres_source && title && (
        <div>
          <h3 class="text-lg font-medium mb-1">
            <a class="hover:text-primary transition ease-in duration-200" href={pres_source}>
              {title}
            </a>
          </h3>
        </div>
      )
    }

    {body && (
      <div class="post-body body whitespace-pre-line">
        {body}
      </div>
    )}

    {pres_url && (
      <div class="text-sm">
        <a class="hover:text-primary transition ease-in duration-200 break-words" href={pres_url}>
          {pres_url}
        </a>
      </div>
    )}
  </div>
</article>
