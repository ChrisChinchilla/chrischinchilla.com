---
import Layout from "~/layouts/PageLayout.astro";
import Video from "../components/Video.astro";
import Headline from '~/components/blog/Headline.astro';

const meta = {
  title: "Videos",
  description: "I have several regular livestreams and produce an edited video roughly once a month.",
  // canonical: post.canonical || url,
  // image: await findImage(post.image),
  // noindex: BLOG?.post?.noindex,
  // ogType: 'article',
};

const youTubeVideos = await fetch(
  `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=200&playlistId=UUgnrx8qi4qhmN6sBebdDrmg&key=${import.meta.env.GOOGLE_API}`
)
  .then((response) => response.json())
  .then((response) => Object.values(response.items));
---

<Layout {meta}>
  <section class="px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">

    <Headline
      subtitle={meta.description}
    >
      {meta.title}
    </Headline>
        <ul>
      {
        youTubeVideos.map((video) => (
          
          <li class="mb-12 md:mb-20">
<Video
              name={video.snippet.title}
              snippet={video.snippet.description}
              id={video.snippet.resourceId.videoId}
            />
          </li>
        ))
      }
    </ul>
    </section>
  </Layout>
